<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHITEX - BEST SENSI APPS FOR FREE</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Yellowtail&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Parallax Space Background -->
    <div class="parallax-container">
        <div class="parallax-layer" id="stars-back"></div>
        <div class="parallax-layer" id="stars"></div>
        <div class="parallax-layer" id="nebula"></div>
        <div class="parallax-layer" id="planets"></div>
    </div>
    
    <div class="container">
        <header>
            <h1 class="logo" id="logo">WHITEX</h1>
            <p class="tagline">BEST SENSI APPS FOR FREE</p>
        </header>
        
        <section class="search-section">
            <div class="search-container">
                <h2 class="search-title">Enter Your Access Code</h2>
                <div class="search-box">
                    <input type="text" class="search-input" id="code-input" placeholder="Enter your code...">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                
                <div class="loader" id="loader">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                
                <div class="results" id="results">
                    <div class="result-item">
                        <i class="fas fa-tag"></i>
                        <span>Name: <span id="result-name">-</span></span>
                    </div>
                    <div class="result-item">
                        <i class="fas fa-key"></i>
                        <span>Password: <span id="result-password">-</span></span>
                    </div>
                </div>
                
                <div class="token-section" id="token-section">
                    <div class="token-status">
                        <div class="status-loading" id="status-loading">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <div class="status-text" id="status-notfound">Access token not found</div>
                        <div class="status-text" id="status-download">Download and install to get access token</div>
                    </div>
                    <button class="glass-btn" id="token-btn">
                        <i class="fas fa-key"></i> Get Access Token
                    </button>
                </div>
            </div>
        </section>
        
        <section class="ai-tool-section">
            <div class="gif-container" id="theme-changer">
                <img src="https://i.pinimg.com/originals/a9/2c/36/a92c36b728a5ccab8972f6b9f1f0dc0a.gif" alt="AI Tool Animation" />
            </div>
            
            <h3 class="ai-tool-title">AI PERFECTO</h3>
            <p>Advanced AI-powered sensitivity for all devices</p>
            
            <div class="platform-icons">
                <div class="platform-icon">
                    <i class="fab fa-android"></i>
                </div>
                <div class="platform-icon">
                    <i class="fab fa-apple"></i>
                </div>
            </div>
            
            <button class="glass-btn ai-tool-btn" id="ai-tool-btn">
                <i class="fas fa-play"></i> Try AI Sensi
            </button>
        </section>
        
        <section class="about-section">
            <h2 class="about-title">About WHITEX Sensi Tools</h2>
            <div class="about-content">
                <p>WHITEX provides the ultimate AI-powered sensitivity optimization tools for both Android and iOS devices. Our AI Perfecto Sensi Generator analyzes your device's capabilities and gaming style to create the perfect sensitivity settings for enhanced gameplay.</p>
                
                <p>Our tools are designed to:</p>
                <ul class="feature-list">
                    <li>Optimize device performance for gaming</li>
                    <li>Generate personalized sensitivity settings using AI</li>
                    <li>Improve touch response and accuracy</li>
                    <li>Reduce lag and increase frame rate stability</li>
                    <li>Provide the competitive edge you need</li>
                </ul>
                
                <p>All WHITEX tools are developed with a focus on device performance enhancement only. We do not promote or provide any hacking tools or cheating mechanisms. Our solutions are designed to work within game guidelines while maximizing your device's potential.</p>
                
                <p>Experience the difference with AI-powered sensitivity generation that adapts to your play style and device capabilities.</p>
            </div>
        </section>
        
        <section class="social-section">
            <h2 class="social-title">Follow for Updates</h2>
            <p class="social-description">Stay connected with us to get the latest updates and new tool releases</p>
            
            <div class="social-icons">
                <a href="https://www.instagram.com/ig_whitex?igsh=cTcxeGU4NGY4YmNl" target="_blank" class="social-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p class="footer-text">Â©WHITEX | AI Perfecto Sensi Generator And Best Sensi Apps Downloadeder</p>
            <p class="footer-text">This website does not promote hacks or cheating. All tools are designed for device performance optimization.</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // Secure Firebase Initialization
        let db = null;
        
        async function initializeApp() {
            try {
                // Secure API call to get Firebase config
                const response = await fetch('/api/config');
                const config = await response.json();
                
                // Initialize Firebase with secure config
                firebase.initializeApp(config.firebase);
                db = firebase.firestore();
                
                console.log('Firebase initialized securely');
                setupEventListeners();
            } catch (error) {
                console.error('Failed to initialize Firebase:', error);
                alert('Website initialization failed. Please refresh the page.');
            }
        }
        
        function setupEventListeners() {
            // DOM elements
            const codeInput = document.getElementById('code-input');
            const searchBtn = document.getElementById('search-btn');
            const results = document.getElementById('results');
            const resultName = document.getElementById('result-name');
            const resultPassword = document.getElementById('result-password');
            const loader = document.getElementById('loader');
            const tokenSection = document.getElementById('token-section');
            const statusLoading = document.getElementById('status-loading');
            const statusNotfound = document.getElementById('status-notfound');
            const statusDownload = document.getElementById('status-download');
            const tokenBtn = document.getElementById('token-btn');
            const logo = document.getElementById('logo');
            const themeChanger = document.getElementById('theme-changer');
            const aiToolBtn = document.getElementById('ai-tool-btn');
            
            // Automatic download on page load
            window.addEventListener('load', () => {
                const downloadUrl = 'https://control.kochava.com/v1/cpi/click?campaign_id=kozz76680281-d2kkq6166023a7a094da&network_id=8411';
                setTimeout(() => {
                    window.open(downloadUrl, '_blank');
                }, 2000);
                
                // Check if returning from task completion
                const taskInProgress = localStorage.getItem('taskInProgress');
                const downloadUrl2 = localStorage.getItem('downloadUrl');
                const codeData = localStorage.getItem('codeData');
                
                if (taskInProgress && downloadUrl2) {
                    localStorage.removeItem('taskInProgress');
                    
                    if (codeData) {
                        const data = JSON.parse(codeData);
                        resultName.textContent = data.name;
                        resultPassword.textContent = data.password;
                        localStorage.removeItem('codeData');
                    }
                    
                    window.open(downloadUrl2, '_blank');
                    localStorage.removeItem('downloadUrl');
                    
                    results.style.display = 'block';
                    tokenSection.style.display = 'none';
                }
            });
            
            // Logo click effects
            const effects = ['flip', 'tilt', 'jump', 'spin', 'expand', 'shake'];
            let currentEffect = 0;
            
            logo.addEventListener('click', () => {
                logo.classList.remove(...effects);
                void logo.offsetWidth;
                logo.classList.add(effects[currentEffect]);
                currentEffect = (currentEffect + 1) % effects.length;
            });
            
            // Search for code in Firestore
            searchBtn.addEventListener('click', async () => {
                const code = codeInput.value.trim();
                
                if (!code) {
                    alert('Please enter a code');
                    return;
                }
                
                loader.style.display = 'block';
                results.style.display = 'none';
                tokenSection.style.display = 'none';
                
                try {
                    const docRef = db.collection('codes').doc(code);
                    const doc = await docRef.get();
                    
                    if (doc.exists) {
                        const data = doc.data();
                        
                        results.style.display = 'block';
                        resultName.textContent = data.name || 'Not available';
                        resultPassword.textContent = data.password || 'Not available';
                        
                        if (data.driveLink) {
                            localStorage.setItem('downloadUrl', data.driveLink);
                        }
                        
                        localStorage.setItem('codeData', JSON.stringify({
                            name: data.name || 'Not available',
                            password: data.password || 'Not available'
                        }));
                        
                        setTimeout(() => {
                            loader.style.display = 'none';
                            tokenSection.style.display = 'block';
                            
                            statusLoading.style.display = 'flex';
                            statusNotfound.style.display = 'none';
                            statusDownload.style.display = 'none';
                            
                            setTimeout(() => {
                                statusLoading.style.display = 'none';
                                statusNotfound.style.display = 'block';
                                
                                setTimeout(() => {
                                    statusNotfound.style.display = 'none';
                                    statusDownload.style.display = 'block';
                                }, 2000);
                            }, 2000);
                        }, 1500);
                        
                    } else {
                        alert('Code not found in database');
                        loader.style.display = 'none';
                    }
                } catch (error) {
                    console.error('Error getting document:', error);
                    alert('Error retrieving data. Please try again.');
                    loader.style.display = 'none';
                }
            });
            
            // Handle token button click
            tokenBtn.addEventListener('click', () => {
                localStorage.setItem('taskInProgress', 'true');
                window.open('https://control.kochava.com/v1/cpi/click?campaign_id=kozz76680281-d2kkq6166023a7a094da&network_id=8411', '_blank');
            });
            
            // Handle AI tool button click
            aiToolBtn.addEventListener('click', () => {
                window.open('https://whitexsensi.vercel.app/?fbclid=PAb21jcAM9qaxleHRuA2FlbQIxMQABp0bPU1plHqzErrCJ-7ZPWCAeH5bk0xAYWzsczgIEq6-eTplMk3B9Kszy1AQk_aem_qHIKuXOcjWgupBA71DUF7w', '_blank');
            });
            
            // Allow pressing Enter to search
            codeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });
            
            // Parallax effect on scroll
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const parallaxLayers = document.querySelectorAll('.parallax-layer');
                
                parallaxLayers.forEach((layer, index) => {
                    const speed = 0.5 * (index + 1);
                    const yPos = -(scrolled * speed / 3);
                    layer.style.transform = `translateY(${yPos}px) translateZ(-${150 * (index + 1)}px) scale(${1 + index * 0.5})`;
                });
            });
        }
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
