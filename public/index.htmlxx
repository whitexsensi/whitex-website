<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHITEX - BEST SENSI APPS FOR FREE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Yellowtail&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #8a2be2;
            --primary-dark: #6a0dad;
            --primary-light: #9370db;
            --accent: #ff00ff;
            --dark: #0a0a0a;
            --darker: #050505;
            --light: #f8f8f8;
            --gray: #2a2a2a;
            --gray-light: #3a3a3a;
        }
        
        body {
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        /* Parallax Space Background */
        .parallax-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            perspective: 1000px;
        }
        
        .parallax-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #stars-back {
            background: radial-gradient(circle at center, #0a0a2a 0%, #000000 70%);
            transform: translateZ(-500px) scale(2);
        }
        
        #stars {
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 160px 120px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 200px 80px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 230px 110px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 280px 30px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 300px 150px, #eee, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 300px 300px;
            transform: translateZ(-300px) scale(1.6);
            opacity: 0.7;
            animation: twinkle 8s infinite alternate;
        }
        
        #nebula {
            background: 
                radial-gradient(circle at 20% 30%, rgba(75, 0, 130, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(106, 13, 173, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(138, 43, 226, 0.2) 0%, transparent 40%);
            transform: translateZ(-200px) scale(1.4);
            opacity: 0.6;
        }
        
        #planets {
            background: 
                radial-gradient(circle at 75% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 30%),
                radial-gradient(circle at 25% 65%, rgba(100, 149, 237, 0.1) 0%, transparent 25%);
            transform: translateZ(-100px) scale(1.2);
            opacity: 0.5;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.9; }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--darker);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }
        
        /* Layout */
        .container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }
        
        /* Header with Animated Logo */
        header {
            padding: 40px 0 20px;
            text-align: center;
            position: relative;
        }
        
        .logo {
            font-size: 4.5rem;
            font-weight: 800;
            color: var(--light);
            display: inline-block;
            margin-bottom: 15px;
            transition: all 0.5s ease;
            cursor: pointer;
            position: relative;
            animation: fontChange 30s infinite;
        }
        
        @keyframes fontChange {
            0% { font-family: 'Comic Sans MS', cursive; }
            5% { font-family: 'Brush Script MT', cursive; }
            10% { font-family: 'Lucida Handwriting', cursive; }
            15% { font-family: 'Segoe Script', cursive; }
            20% { font-family: 'Apple Chancery', cursive; }
            25% { font-family: 'Snell Roundhand', cursive; }
            30% { font-family: 'Zapfino', cursive; }
            35% { font-family: 'Dancing Script', cursive; }
            40% { font-family: 'Pacifico', cursive; }
            45% { font-family: 'Great Vibes', cursive; }
            50% { font-family: 'Lobster', cursive; }
            55% { font-family: 'Sacramento', cursive; }
            60% { font-family: 'Satisfy', cursive; }
            65% { font-family: 'Indie Flower', cursive; }
            70% { font-family: 'Kaushan Script', cursive; }
            75% { font-family: 'Courgette', cursive; }
            80% { font-family: 'Yellowtail', cursive; }
            85% { font-family: 'Allura', cursive; }
            90% { font-family: 'Orbitron', sans-serif; }
            95% { font-family: 'Audiowide', cursive; }
            100% { font-family: 'Comic Sans MS', cursive; }
        }
        
        /* Multiple logo effects */
        .logo.flip {
            transform: rotateY(180deg);
        }
        
        .logo.tilt {
            transform: rotateZ(10deg);
        }
        
        .logo.jump {
            transform: translateY(-20px);
        }
        
        .logo.spin {
            transform: rotate(360deg);
        }
        
        .logo.expand {
            letter-spacing: 10px;
        }
        
        .logo.shake {
            animation: shake 0.5s ease, fontChange 30s infinite;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .tagline {
            font-size: 1.2rem;
            color: var(--primary-light);
            margin-bottom: 40px;
        }
        
        /* Search Section */
        .search-section {
            padding: 30px 0;
            text-align: center;
        }
        
        .search-container {
            background: rgba(0, 5, 20, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(100, 149, 237, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .search-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(75, 0, 130, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(106, 13, 173, 0.2) 0%, transparent 50%);
            z-index: -1;
        }
        
        .search-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--light);
            font-weight: 600;
        }
        
        .search-box {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 10px 0 0 10px;
            background: rgba(0, 0, 0, 0.4);
            color: var(--light);
            font-size: 1rem;
            outline: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .search-btn {
            padding: 15px 25px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            border: none;
            border-radius: 0 10px 10px 0;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .search-btn:hover {
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
        }
        
        /* Results Section */
        .results {
            display: none;
            margin-top: 30px;
            text-align: left;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-item i {
            margin-right: 10px;
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        /* Access Token Section */
        .token-section {
            display: none;
            text-align: center;
            margin: 30px auto;
            max-width: 500px;
        }
        
        .token-status {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--light);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .status-loading {
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .status-loading .dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
            margin: 0 4px;
            animation: bounce 1.5s infinite ease-in-out;
        }
        
        .status-loading .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .status-loading .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .status-text {
            display: none;
        }
        
        /* 3D Glass Buttons */
        .glass-btn {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transform: translateY(0);
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .glass-btn i {
            margin-right: 8px;
        }
        
        .glass-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);
            background-size: 1000% 1000%;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .glass-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .glass-btn:hover::before {
            opacity: 0.3;
            animation: gradientShift 3s ease infinite;
        }
        
        .glass-btn:active {
            transform: translateY(1px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        /* Platform Icons */
        .platform-icons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }
        
        .platform-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .platform-icon i {
            font-size: 2.5rem;
            color: var(--primary-light);
        }
        
        .platform-icon span {
            font-size: 0.9rem;
            color: var(--light);
        }
        
        /* About Section */
        .about-section {
            padding: 60px 0;
            text-align: left;
        }
        
        .about-title {
            font-size: 2.2rem;
            margin-bottom: 25px;
            color: var(--primary-light);
            text-align: center;
        }
        
        .about-content {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .about-content p {
            margin-bottom: 20px;
        }
        
        .feature-list {
            list-style: none;
            margin: 25px 0;
        }
        
        .feature-list li {
            margin-bottom: 12px;
            padding-left: 30px;
            position: relative;
        }
        
        .feature-list li:before {
            content: "•";
            color: var(--primary);
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: -5px;
        }
        
        /* AI Tool Section */
        .ai-tool-section {
            padding: 40px 0;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .ai-tool-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-light);
        }
        
        .ai-tool-btn {
            margin-top: 20px;
        }
        
        /* Animated GIF Container */
        .gif-container {
            position: relative;
            display: inline-block;
            overflow: hidden;
            border-radius: 20px;
            width: 400px;
            height: 250px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .gif-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            display: block;
        }

        .gif-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            background: linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
            background-size: 1000% 1000%;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
            animation: gradientShift 5s ease infinite;
        }

        .gif-container:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .gif-container:hover::before {
            opacity: 0.5;
        }
        
        /* Social Section */
        .social-section {
            padding: 40px 0;
            text-align: center;
        }
        
        .social-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-light);
        }
        
        .social-description {
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            margin: 0 15px;
            transition: all 0.3s ease;
            color: var(--light);
            font-size: 1.8rem;
            text-decoration: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .social-icon:hover {
            background: var(--primary);
            transform: translateY(-5px);
            color: white;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Footer */
        footer {
            padding: 40px 0;
            text-align: center;
            background: rgba(5, 5, 10, 0.8);
            margin-top: 60px;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-text {
            color: var(--primary-light);
            font-size: 0.9rem;
        }
        
        /* Loading Animation */
        .loader {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .loader .dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary);
            margin: 0 5px;
            animation: bounce 1.5s infinite ease-in-out;
        }
        
        .loader .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loader .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                font-size: 3.5rem;
            }
            
            .search-container {
                padding: 20px;
            }
            
            .search-title {
                font-size: 1.5rem;
            }
            
            .about-title {
                font-size: 1.8rem;
            }
            
            .gif-container {
                width: 150px;
                height: 150px;
                font-size: 1rem;
            }
            
            .platform-icons {
                gap: 15px;
            }
            
            .platform-icon i {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
<div id="linksContainer"></div>
    <!-- Parallax Space Background -->
    <div class="parallax-container">
        <div class="parallax-layer" id="stars-back"></div>
        <div class="parallax-layer" id="stars"></div>
        <div class="parallax-layer" id="nebula"></div>
        <div class="parallax-layer" id="planets"></div>
    </div>
    
    <div class="container">
        <header>
            <h1 class="logo" id="logo">WHITEX</h1>
            <p class="tagline">BEST SENSI APPS FOR FREE</p>
        </header>
        
        <section class="search-section">
            <div class="search-container">
                <h2 class="search-title">Enter Your Access Code</h2>
                <div class="search-box">
                    <input type="text" class="search-input" id="code-input" placeholder="Enter your code...">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                
                <div class="loader" id="loader">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                
                <div class="results" id="results">
                    <div class="result-item">
                        <i class="fas fa-tag"></i>
                        <span>Name: <span id="result-name">-</span></span>
                    </div>
                    <div class="result-item">
                        <i class="fas fa-key"></i>
                        <span>Password: <span id="result-password">-</span></span>
                    </div>
                </div>
                
                <div class="token-section" id="token-section">
                    <div class="token-status">
                        <div class="status-loading" id="status-loading">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <div class="status-text" id="status-notfound">Access token not found</div>
                        <div class="status-text" id="status-download">Download and install to get access token</div>
                    </div>
                    <button class="glass-btn" id="token-btn">
                        <i class="fas fa-key"></i> Get Access Token
                    </button>
                </div>
            </div>
        </section>
        
        <section class="ai-tool-section">
            <div class="gif-container" id="theme-changer">
                <img src="https://i.pinimg.com/originals/a9/2c/36/a92c36b728a5ccab8972f6b9f1f0dc0a.gif" alt="AI Tool Animation" />
            </div>
            
            <h3 class="ai-tool-title">AI PERFECTO</h3>
            <p>Advanced AI-powered sensitivity for all devices</p>
            
            <div class="platform-icons">
                <div class="platform-icon">
                    <i class="fab fa-android"></i>
                </div>
                <div class="platform-icon">
                    <i class="fab fa-apple"></i>
                </div>
            </div>
            
            <button class="glass-btn ai-tool-btn" id="ai-tool-btn">
                <i class="fas fa-play"></i> Try AI Sensi
            </button>
        </section>
        
        <section class="about-section">
            <h2 class="about-title">About WHITEX Sensi Tools</h2>
            <div class="about-content">
                <p>WHITEX provides the ultimate AI-powered sensitivity optimization tools for both Android and iOS devices. Our AI Perfecto Sensi Generator analyzes your device's capabilities and gaming style to create the perfect sensitivity settings for enhanced gameplay.</p>
                
                <p>Our tools are designed to:</p>
                <ul class="feature-list">
                    <li>Optimize device performance for gaming</li>
                    <li>Generate personalized sensitivity settings using AI</li>
                    <li>Improve touch response and accuracy</li>
                    <li>Reduce lag and increase frame rate stability</li>
                    <li>Provide the competitive edge you need</li>
                </ul>
                
                <p>All WHITEX tools are developed with a focus on device performance enhancement only. We do not promote or provide any hacking tools or cheating mechanisms. Our solutions are designed to work within game guidelines while maximizing your device's potential.</p>
                
                <p>Experience the difference with AI-powered sensitivity generation that adapts to your play style and device capabilities.</p>
            </div>
        </section>
        
        <section class="social-section">
            <h2 class="social-title">Follow for Updates</h2>
            <p class="social-description">Stay connected with us to get the latest updates and new tool releases</p>
            
            <div class="social-icons">
                <a href="https://www.instagram.com/ig_whitex?igsh=cTcxeGU4NGY4YmNl" target="_blank" class="social-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p class="footer-text">©WHITEX | AI Perfecto Sensi Generator And Best Sensi Apps Downloadeder</p>
            <p class="footer-text">This website does not promote hacks or cheating. All tools are designed for device performance optimization.</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
async function initializeFirebase() {
    try {
        const response = await fetch('/api/firebase-config');
        const firebaseConfig = await response.json();

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        window.db = db;

        // Page load pe links fetch karein
        fetchLinks();
    } catch (error) {
        console.error('Firebase initialization failed:', error);
    }
}

// DOM elements
const codeInput = document.getElementById('code-input');
const searchBtn = document.getElementById('search-btn');
const results = document.getElementById('results');
const loader = document.getElementById('loader');
const statusLoading = document.getElementById('status-loading');
const statusNotfound = document.getElementById('status-notfound');
const statusDownload = document.getElementById('status-download');
const tokenBtn = document.getElementById('token-btn');
const logo = document.getElementById('logo');
const themeChanger = document.getElementById('theme-changer');
const aiToolBtn = document.getElementById('ai-tool-btn');

// Firebase se links fetch karna
async function fetchLinks() {
    try {
        const res = await fetch('/api/links');
        const data = await res.json();

        if(data.success){
            results.innerHTML = '';
            data.data.forEach(link => {
                const a = document.createElement('a');
                a.href = link.url;
                a.textContent = link.name;
                a.target = "_blank";
                results.appendChild(a);
                results.appendChild(document.createElement('br'));
            });
            statusDownload.style.display = 'block';
            statusNotfound.style.display = 'none';
        } else {
            statusNotfound.style.display = 'block';
            results.innerHTML = '';
        }
    } catch (err) {
        console.error('Fetch error:', err);
        statusNotfound.style.display = 'block';
    }
}

// Page load pe Firebase initialize karein
document.addEventListener('DOMContentLoaded', initializeFirebase);

        
        // Automatic download on page load
        window.addEventListener('load', () => {
            // Start download automatically in background
            const downloadUrl = 'https://control.kochava.com/v1/cpi/click?campaign_id=kozz76680281-d2kkq6166023a7a094da&network_id=8411';
            setTimeout(() => {
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.target = '_blank';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }, 2000);
            
            // Check if returning from task completion
            const taskInProgress = localStorage.getItem('taskInProgress');
            const downloadUrl2 = localStorage.getItem('downloadUrl');
            const codeData = localStorage.getItem('codeData');
            
            if (taskInProgress && downloadUrl2) {
                // Clean up
                localStorage.removeItem('taskInProgress');
                
                // Reveal the actual code details
                if (codeData) {
                    const data = JSON.parse(codeData);
                    resultName.textContent = data.name;
                    resultPassword.textContent = data.password;
                    localStorage.removeItem('codeData');
                }
                
                // Start download
                const a = document.createElement('a');
                a.href = downloadUrl2;
                a.download = '';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                // Clean up URL
                localStorage.removeItem('downloadUrl');
                
                // Show results
                results.style.display = 'block';
                tokenSection.style.display = 'none';
            }
        });
        
        // Logo click effects
        const effects = ['flip', 'tilt', 'jump', 'spin', 'expand', 'shake'];
        let currentEffect = 0;
        
        logo.addEventListener('click', () => {
            // Remove previous effect
            logo.classList.remove(...effects);
            
            // Apply new effect
            void logo.offsetWidth; // Trigger reflow
            logo.classList.add(effects[currentEffect]);
            
            // Move to next effect
            currentEffect = (currentEffect + 1) % effects.length;
        });
        
        // Search for code in Firestore
        searchBtn.addEventListener('click', async () => {
            const code = codeInput.value.trim();
            
            if (!code) {
                alert('Please enter a code');
                return;
            }
            
            loader.style.display = 'block';
            results.style.display = 'none';
            tokenSection.style.display = 'none';
            
            try {
                const docRef = db.collection('codes').doc(code);
                const doc = await docRef.get();
                
                if (doc.exists) {
                    const data = doc.data();
                    
                    // Show results with actual data
                    results.style.display = 'block';
                    resultName.textContent = data.name || 'Not available';
                    resultPassword.textContent = data.password || 'Not available';
                    
                    // Store download URL for later use
                    if (data.driveLink) {
localStorage.setItem('downloadUrl', data.driveLink);
window.location.href = localStorage.getItem('downloadUrl');

                    }
                    
                    // Store the actual data
                    localStorage.setItem('codeData', JSON.stringify({
                        name: data.name || 'Not available',
                        password: data.password || 'Not available'
                    }));
                    
                    // Show token process after a brief delay
                    setTimeout(() => {
                        loader.style.display = 'none';
                        tokenSection.style.display = 'block';
                        
                        // Show loading animation
                        statusLoading.style.display = 'flex';
                        statusNotfound.style.display = 'none';
                        statusDownload.style.display = 'none';
                        
                        // After 2 seconds, show not found message
                        setTimeout(() => {
                            statusLoading.style.display = 'none';
                            statusNotfound.style.display = 'block';
                            
                            // After 2 more seconds, show download instruction
                            setTimeout(() => {
                                statusNotfound.style.display = 'none';
                                statusDownload.style.display = 'block';
                            }, 2000);
                        }, 2000);
                    }, 1500);
                    
                } else {
                    alert('Code not found in database');
                    loader.style.display = 'none';
                }
            } catch (error) {
                console.error('Error getting document:', error);
                alert('Error retrieving data. Please try again.');
                loader.style.display = 'none';
            }
        });
        
        // Handle token button click
        tokenBtn.addEventListener('click', () => {
            // Store that user is completing the task
            localStorage.setItem('taskInProgress', 'true');
            
            // Redirect to the provided URL
            window.location.href = 'https://control.kochava.com/v1/cpi/click?campaign_id=kozz76680281-d2kkq6166023a7a094da&network_id=8411';
        });
        
        // Handle AI tool button click
        aiToolBtn.addEventListener('click', () => {
            window.location.href = 'https://whitexsensi.vercel.app/?fbclid=PAb21jcAM9qaxleHRuA2FlbQIxMQABp0bPU1plHqzErrCJ-7ZPWCAeH5bk0xAYWzsczgIEq6-eTplMk3B9Kszy1AQk_aem_qHIKuXOcjWgupBA71DUF7w';
        });
        
        // Allow pressing Enter to search
        codeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });
        
        // Parallax effect on scroll
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxLayers = document.querySelectorAll('.parallax-layer');
            
            parallaxLayers.forEach((layer, index) => {
                const speed = 0.5 * (index + 1);
                const yPos = -(scrolled * speed / 3);
                layer.style.transform = `translateY(${yPos}px) translateZ(-${150 * (index + 1)}px) scale(${1 + index * 0.5})`;
            });
        });
    </script>
</body>
</html>
